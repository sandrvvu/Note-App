{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/editor\n */\nimport Context from '../context';\nimport Config from '@ckeditor/ckeditor5-utils/src/config';\nimport EditingController from '@ckeditor/ckeditor5-engine/src/controller/editingcontroller';\nimport PluginCollection from '../plugincollection';\nimport CommandCollection from '../commandcollection';\nimport DataController from '@ckeditor/ckeditor5-engine/src/controller/datacontroller';\nimport Conversion from '@ckeditor/ckeditor5-engine/src/conversion/conversion';\nimport Model from '@ckeditor/ckeditor5-engine/src/model/model';\nimport EditingKeystrokeHandler from '../editingkeystrokehandler';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport { StylesProcessor } from '@ckeditor/ckeditor5-engine/src/view/stylesmap';\n/**\n * The class representing a basic, generic editor.\n *\n * Check out the list of its subclasses to learn about specific editor implementations.\n *\n * All editor implementations (like {@link module:editor-classic/classiceditor~ClassicEditor} or\n * {@link module:editor-inline/inlineeditor~InlineEditor}) should extend this class. They can add their\n * own methods and properties.\n *\n * When you are implementing a plugin, this editor represents the API\n * which your plugin can expect to get when using its {@link module:core/plugin~Plugin#editor} property.\n *\n * This API should be sufficient in order to implement the \"editing\" part of your feature\n * (schema definition, conversion, commands, keystrokes, etc.).\n * It does not define the editor UI, which is available only if\n * the specific editor implements also the {@link module:core/editor/editorwithui~EditorWithUI} interface\n * (as most editor implementations do).\n *\n * @abstract\n * @mixes module:utils/observablemixin~ObservableMixin\n */\n\nexport default class Editor {\n  /**\n   * Creates a new instance of the editor class.\n   *\n   * Usually, not to be used directly. See the static {@link module:core/editor/editor~Editor.create `create()`} method.\n   *\n   * @param {Object} [config={}] The editor configuration.\n   */\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Prefer the language passed as the argument to the constructor instead of the constructor's `defaultConfig`, if both are set.\n    const language = config.language || this.constructor.defaultConfig && this.constructor.defaultConfig.language;\n    /**\n     * The editor context.\n     * When it is not provided through the configuration, the editor creates it.\n     *\n     * @protected\n     * @type {module:core/context~Context}\n     */\n\n    this._context = config.context || new Context({\n      language\n    });\n\n    this._context._addEditor(this, !config.context); // Clone the plugins to make sure that the plugin array will not be shared\n    // between editors and make the watchdog feature work correctly.\n\n\n    const availablePlugins = Array.from(this.constructor.builtinPlugins || []);\n    /**\n     * Stores all configurations specific to this editor instance.\n     *\n     *\t\teditor.config.get( 'image.toolbar' );\n     *\t\t// -> [ 'imageStyle:block', 'imageStyle:side', '|', 'toggleImageCaption', 'imageTextAlternative' ]\n     *\n     * @readonly\n     * @member {module:utils/config~Config}\n     */\n\n    this.config = new Config(config, this.constructor.defaultConfig);\n    this.config.define('plugins', availablePlugins);\n    this.config.define(this._context._getEditorConfig());\n    /**\n     * The plugins loaded and in use by this editor instance.\n     *\n     *\t\teditor.plugins.get( 'ClipboardPipeline' ); // -> An instance of the clipboard pipeline plugin.\n     *\n     * @readonly\n     * @member {module:core/plugincollection~PluginCollection}\n     */\n\n    this.plugins = new PluginCollection(this, availablePlugins, this._context.plugins);\n    /**\n     * The locale instance.\n     *\n     * @readonly\n     * @type {module:utils/locale~Locale}\n     */\n\n    this.locale = this._context.locale;\n    /**\n     * Shorthand for {@link module:utils/locale~Locale#t}.\n     *\n     * @see module:utils/locale~Locale#t\n     * @method #t\n     */\n\n    this.t = this.locale.t;\n    /**\n     * A set of lock IDs for the {@link #isReadOnly} getter.\n     *\n     * @private\n     * @type {Set.<String|Symbol>}\n     */\n\n    this._readOnlyLocks = new Set();\n    /**\n     * Commands registered to the editor.\n     *\n     * Use the shorthand {@link #execute `editor.execute()`} method to execute commands:\n     *\n     *\t\t// Execute the bold command:\n     *\t\teditor.execute( 'bold' );\n     *\n     *\t\t// Check the state of the bold command:\n     *\t\teditor.commands.get( 'bold' ).value;\n     *\n     * @readonly\n     * @member {module:core/commandcollection~CommandCollection}\n     */\n\n    this.commands = new CommandCollection();\n    /**\n     * Indicates the editor life-cycle state.\n     *\n     * The editor is in one of the following states:\n     *\n     * * `initializing` &ndash; During the editor initialization (before\n     * {@link module:core/editor/editor~Editor.create `Editor.create()`}) finished its job.\n     * * `ready` &ndash; After the promise returned by the {@link module:core/editor/editor~Editor.create `Editor.create()`}\n     * method is resolved.\n     * * `destroyed` &ndash; Once the {@link #destroy `editor.destroy()`} method was called.\n     *\n     * @observable\n     * @member {'initializing'|'ready'|'destroyed'} #state\n     */\n\n    this.set('state', 'initializing');\n    this.once('ready', () => this.state = 'ready', {\n      priority: 'high'\n    });\n    this.once('destroy', () => this.state = 'destroyed', {\n      priority: 'high'\n    });\n    /**\n     * The editor's model.\n     *\n     * The central point of the editor's abstract data model.\n     *\n     * @readonly\n     * @member {module:engine/model/model~Model}\n     */\n\n    this.model = new Model();\n    const stylesProcessor = new StylesProcessor();\n    /**\n     * The {@link module:engine/controller/datacontroller~DataController data controller}.\n     * Used e.g. for setting and retrieving the editor data.\n     *\n     * @readonly\n     * @member {module:engine/controller/datacontroller~DataController}\n     */\n\n    this.data = new DataController(this.model, stylesProcessor);\n    /**\n     * The {@link module:engine/controller/editingcontroller~EditingController editing controller}.\n     * Controls user input and rendering the content for editing.\n     *\n     * @readonly\n     * @member {module:engine/controller/editingcontroller~EditingController}\n     */\n\n    this.editing = new EditingController(this.model, stylesProcessor);\n    this.editing.view.document.bind('isReadOnly').to(this);\n    /**\n     * Conversion manager through which you can register model-to-view and view-to-model converters.\n     *\n     * See the {@link module:engine/conversion/conversion~Conversion} documentation to learn how to add converters.\n     *\n     * @readonly\n     * @member {module:engine/conversion/conversion~Conversion}\n     */\n\n    this.conversion = new Conversion([this.editing.downcastDispatcher, this.data.downcastDispatcher], this.data.upcastDispatcher);\n    this.conversion.addAlias('dataDowncast', this.data.downcastDispatcher);\n    this.conversion.addAlias('editingDowncast', this.editing.downcastDispatcher);\n    /**\n     * An instance of the {@link module:core/editingkeystrokehandler~EditingKeystrokeHandler}.\n     *\n     * It allows setting simple keystrokes:\n     *\n     *\t\t// Execute the bold command on Ctrl+E:\n     *\t\teditor.keystrokes.set( 'Ctrl+E', 'bold' );\n     *\n     *\t\t// Execute your own callback:\n     *\t\teditor.keystrokes.set( 'Ctrl+E', ( data, cancel ) => {\n     *\t\t\tconsole.log( data.keyCode );\n     *\n     *\t\t\t// Prevent the default (native) action and stop the underlying keydown event\n     *\t\t\t// so no other editor feature will interfere.\n     *\t\t\tcancel();\n     *\t\t} );\n     *\n     * Note: Certain typing-oriented keystrokes (like <kbd>Backspace</kbd> or <kbd>Enter</kbd>) are handled\n     * by a low-level mechanism and trying to listen to them via the keystroke handler will not work reliably.\n     * To handle these specific keystrokes, see the events fired by the\n     * {@link module:engine/view/document~Document editing view document} (`editor.editing.view.document`).\n     *\n     * @readonly\n     * @member {module:core/editingkeystrokehandler~EditingKeystrokeHandler}\n     */\n\n    this.keystrokes = new EditingKeystrokeHandler(this);\n    this.keystrokes.listenTo(this.editing.view.document);\n  }\n  /**\n   * Defines whether the editor is in the read-only mode.\n   *\n   * In read-only mode the editor {@link #commands commands} are disabled so it is not possible\n   * to modify the document by using them. Also, the editable element(s) become non-editable.\n   *\n   * In order to make the editor read-only, you need to call the {@link #enableReadOnlyMode} method:\n   *\n   *\t\teditor.enableReadOnlyMode( 'feature-id' );\n   *\n      * Later, to turn off the read-only mode, call {@link #disableReadOnlyMode}:\n   *\n   * \t\teditor.disableReadOnlyMode( 'feature-id' );\n   *\n   * @readonly\n   * @observable\n   * @member {Boolean} #isReadOnly\n   */\n\n\n  get isReadOnly() {\n    return this._readOnlyLocks.size > 0;\n  }\n\n  set isReadOnly(value) {\n    /**\n     * {@link #isReadOnly Editor#isReadOnly} property is read-only since version `34.0.0` and can be set only using\n     * {@link #enableReadOnlyMode `Editor#enableReadOnlyMode( lockId )`} and\n     * {@link #disableReadOnlyMode `Editor#disableReadOnlyMode( lockId )`}.\n     *\n     * Before version `34.0.0`:\n     *\n     *\t\teditor.isReadOnly = true;\n     * \t\teditor.isReadOnly = false;\n     *\n     * Since version `34.0.0`:\n     *\n     *\t\teditor.enableReadOnlyMode( 'my-feature-id' );\n     * \t\teditor.disableReadOnlyMode( 'my-feature-id' );\n     *\n     * @error editor-isreadonly-has-no-setter\n     */\n    throw new CKEditorError('editor-isreadonly-has-no-setter');\n  }\n  /**\n   * Turns on the read-only mode in the editor.\n   *\n   * Editor can be switched to or out of the read-only mode by many features, under various circumstances. The editor supports locking\n   * mechanism for the read-only mode. It enables easy control over the read-only mode when many features wants to turn it on or off at\n   * the same time, without conflicting with each other. It guarantees that you will not make the editor editable accidentally (which\n   * could lead to errors).\n   *\n   * Each read-only mode request is identified by a unique id (also called \"lock\"). If multiple plugins requested to turn on the\n   * read-only mode, then, the editor will become editable only after all these plugins turn the read-only mode off (using the same ids).\n   *\n   * Note, that you cannot force the editor to disable the read-only mode if other plugins set it.\n   *\n   * After the first `enableReadOnlyMode()` call, the {@link #isReadOnly `isReadOnly` property} will be set to `true`:\n   *\n   *\t\teditor.isReadOnly; // `false`.\n   * \t\teditor.enableReadOnlyMode( 'my-feature-id' );\n   * \t\teditor.isReadOnly; // `true`.\n   *\n   * You can turn off the read-only mode (\"clear the lock\") using the {@link #disableReadOnlyMode `disableReadOnlyMode()`} method:\n   *\n   * \t\teditor.enableReadOnlyMode( 'my-feature-id' );\n   * \t\t// ...\n   * \t\teditor.disableReadOnlyMode( 'my-feature-id' );\n   * \t\teditor.isReadOnly; // `false`.\n   *\n   * All \"locks\" need to be removed to enable editing:\n   *\n   * \t\teditor.enableReadOnlyMode( 'my-feature-id' );\n   * \t\teditor.enableReadOnlyMode( 'my-other-feature-id' );\n   * \t\t// ...\n   * \t\teditor.disableReadOnlyMode( 'my-feature-id' );\n   * \t\teditor.isReadOnly; // `true`.\n   * \t\teditor.disableReadOnlyMode( 'my-other-feature-id' );\n   * \t\teditor.isReadOnly; // `false`.\n   *\n   * @param {String|Symbol} lockId A unique ID for setting the editor to the read-only state.\n   */\n\n\n  enableReadOnlyMode(lockId) {\n    if (typeof lockId !== 'string' && typeof lockId !== 'symbol') {\n      /**\n       * The lock ID is missing or it is not a string or symbol.\n       *\n       * @error editor-read-only-lock-id-invalid\n       */\n      throw new CKEditorError('editor-read-only-lock-id-invalid', null, {\n        lockId\n      });\n    }\n\n    if (this._readOnlyLocks.has(lockId)) {\n      return;\n    }\n\n    this._readOnlyLocks.add(lockId);\n\n    if (this._readOnlyLocks.size === 1) {\n      // Manually fire the `change:isReadOnly` event as only getter is provided.\n      this.fire('change:isReadOnly', 'isReadOnly', true, false);\n    }\n  }\n  /**\n   * Removes the read-only lock from the editor with given lock ID.\n   *\n   * When no lock is present on the editor anymore, then the {@link #isReadOnly `isReadOnly` property} will be set to `false`.\n   *\n   * @param {String|Symbol} lockId The lock ID for setting the editor to the read-only state.\n   */\n\n\n  disableReadOnlyMode(lockId) {\n    if (typeof lockId !== 'string' && typeof lockId !== 'symbol') {\n      throw new CKEditorError('editor-read-only-lock-id-invalid', null, {\n        lockId\n      });\n    }\n\n    if (!this._readOnlyLocks.has(lockId)) {\n      return;\n    }\n\n    this._readOnlyLocks.delete(lockId);\n\n    if (this._readOnlyLocks.size === 0) {\n      // Manually fire the `change:isReadOnly` event as only getter is provided.\n      this.fire('change:isReadOnly', 'isReadOnly', false, true);\n    }\n  }\n  /**\n   * Loads and initializes plugins specified in the configuration.\n   *\n   * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which resolves\n   * once the initialization is completed, providing an array of loaded plugins.\n   */\n\n\n  initPlugins() {\n    const config = this.config;\n    const plugins = config.get('plugins');\n    const removePlugins = config.get('removePlugins') || [];\n    const extraPlugins = config.get('extraPlugins') || [];\n    const substitutePlugins = config.get('substitutePlugins') || [];\n    return this.plugins.init(plugins.concat(extraPlugins), removePlugins, substitutePlugins);\n  }\n  /**\n   * Destroys the editor instance, releasing all resources used by it.\n   *\n   * **Note** The editor cannot be destroyed during the initialization phase so if it is called\n   * while the editor {@link #state is being initialized}, it will wait for the editor initialization before destroying it.\n   *\n   * @fires destroy\n   * @returns {Promise} A promise that resolves once the editor instance is fully destroyed.\n   */\n\n\n  destroy() {\n    let readyPromise = Promise.resolve();\n\n    if (this.state == 'initializing') {\n      readyPromise = new Promise(resolve => this.once('ready', resolve));\n    }\n\n    return readyPromise.then(() => {\n      this.fire('destroy');\n      this.stopListening();\n      this.commands.destroy();\n    }).then(() => this.plugins.destroy()).then(() => {\n      this.model.destroy();\n      this.data.destroy();\n      this.editing.destroy();\n      this.keystrokes.destroy();\n    }) // Remove the editor from the context.\n    // When the context was created by this editor, the context will be destroyed.\n    .then(() => this._context._removeEditor(this));\n  }\n  /**\n   * Executes the specified command with given parameters.\n   *\n   * Shorthand for:\n   *\n   *\t\teditor.commands.get( commandName ).execute( ... );\n   *\n   * @param {String} commandName The name of the command to execute.\n   * @param {*} [...commandParams] Command parameters.\n   * @returns {*} The value returned by the {@link module:core/commandcollection~CommandCollection#execute `commands.execute()`}.\n   */\n\n\n  execute() {\n    try {\n      return this.commands.execute(...arguments);\n    } catch (err) {\n      // @if CK_DEBUG // throw err;\n\n      /* istanbul ignore next */\n      CKEditorError.rethrowUnexpectedError(err, this);\n    }\n  }\n  /**\n   * Focuses the editor.\n   *\n   * **Note** To explicitly focus the editing area of the editor, use the\n   * {@link module:engine/view/view~View#focus `editor.editing.view.focus()`} method of the editing view.\n   *\n   * Check out the {@glink framework/guides/deep-dive/ui/focus-tracking#focus-in-the-editor-ui Focus in the editor UI} section\n   * of the {@glink framework/guides/deep-dive/ui/focus-tracking Deep dive into focus tracking} guide to learn more.\n   */\n\n\n  focus() {\n    this.editing.view.focus();\n  }\n  /**\n   * Creates and initializes a new editor instance.\n   *\n   * This is an abstract method. Every editor type needs to implement its own initialization logic.\n   *\n   * See the `create()` methods of the existing editor types to learn how to use them:\n   *\n   * * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}\n   * * {@link module:editor-balloon/ballooneditor~BalloonEditor.create `BalloonEditor.create()`}\n   * * {@link module:editor-decoupled/decouplededitor~DecoupledEditor.create `DecoupledEditor.create()`}\n   * * {@link module:editor-inline/inlineeditor~InlineEditor.create `InlineEditor.create()`}\n   *\n   * @abstract\n   * @method module:core/editor/editor~Editor.create\n   */\n\n\n}\nmix(Editor, ObservableMixin);\n/**\n * Fired when the {@link module:engine/controller/datacontroller~DataController#event:ready data} and all additional\n * editor components are ready.\n *\n * Note: This event is most useful for plugin developers. When integrating the editor with your website or\n * application, you do not have to listen to `editor#ready` because when the promise returned by the static\n * {@link module:core/editor/editor~Editor.create `Editor.create()`} event is resolved, the editor is already ready.\n * In fact, since the first moment when the editor instance is available to you is inside `then()`'s callback,\n * you cannot even add a listener to the `editor#ready` event.\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event ready\n */\n\n/**\n * Fired when this editor instance is destroyed. The editor at this point is not usable and this event should be used to\n * perform the clean-up in any plugin.\n *\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event destroy\n */\n\n/**\n * This error is thrown when trying to pass a `<textarea>` element to a `create()` function of an editor class.\n *\n * The only editor type which can be initialized on `<textarea>` elements is\n * the {@glink installation/advanced/alternative-setups/predefined-builds#classic-editor classic editor}.\n * This editor hides the passed element and inserts its own UI next to it. Other types of editors reuse the passed element as their root\n * editable element and therefore `<textarea>` is not appropriate for them. Use a `<div>` or another text container instead:\n *\n *\t\t<div id=\"editor\">\n *\t\t\t<p>Initial content.</p>\n *\t\t</div>\n *\n * @error editor-wrong-element\n */\n\n/**\n * An array of plugins built into this editor class.\n *\n * It is used in CKEditor 5 builds to provide a list of plugins which are later automatically initialized\n * during the editor initialization.\n *\n * They will be automatically initialized by the editor, unless listed in `config.removePlugins` and\n * unless `config.plugins` is passed.\n *\n *\t\t// Build some plugins into the editor class first.\n *\t\tClassicEditor.builtinPlugins = [ FooPlugin, BarPlugin ];\n *\n *\t\t// Normally, you need to define config.plugins, but since ClassicEditor.builtinPlugins was\n *\t\t// defined, now you can call create() without any configuration.\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\teditor.plugins.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Do not initialize these plugins (note: it is defined by a string):\n *\t\t\t\tremovePlugins: [ 'Foo' ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> Undefined.\n *\t\t\t\teditor.config.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Load only this plugin. It can also be defined by a string if\n *\t\t\t\t// this plugin was built into the editor class.\n *\t\t\t\tplugins: [ FooPlugin ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\teditor.config.get( BarPlugin ); // -> Undefined.\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.defaultConfig}.\n *\n * @static\n * @member {Array.<Function>} module:core/editor/editor~Editor.builtinPlugins\n */\n\n/**\n * The default configuration which is built into the editor class.\n *\n * It is used in CKEditor 5 builds to provide the default configuration options which are later used during the editor initialization.\n *\n *\t\tClassicEditor.defaultConfig = {\n *\t\t\tfoo: 1,\n *\t\t\tbar: 2\n *\t\t};\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 2\n *\t\t\t} );\n *\n *\t\t// The default options can be overridden by the configuration passed to create().\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, { bar: 3 } )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 3\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.builtinPlugins}.\n *\n * @static\n * @member {Object} module:core/editor/editor~Editor.defaultConfig\n */","map":{"version":3,"names":["Context","Config","EditingController","PluginCollection","CommandCollection","DataController","Conversion","Model","EditingKeystrokeHandler","ObservableMixin","mix","CKEditorError","StylesProcessor","Editor","constructor","config","language","defaultConfig","_context","context","_addEditor","availablePlugins","Array","from","builtinPlugins","define","_getEditorConfig","plugins","locale","t","_readOnlyLocks","Set","commands","set","once","state","priority","model","stylesProcessor","data","editing","view","document","bind","to","conversion","downcastDispatcher","upcastDispatcher","addAlias","keystrokes","listenTo","isReadOnly","size","value","enableReadOnlyMode","lockId","has","add","fire","disableReadOnlyMode","delete","initPlugins","get","removePlugins","extraPlugins","substitutePlugins","init","concat","destroy","readyPromise","Promise","resolve","then","stopListening","_removeEditor","execute","err","rethrowUnexpectedError","focus"],"sources":["C:/kpii/KYRSACH/note_app/client/node_modules/@ckeditor/ckeditor5-core/src/editor/editor.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/editor\n */\n\nimport Context from '../context';\nimport Config from '@ckeditor/ckeditor5-utils/src/config';\nimport EditingController from '@ckeditor/ckeditor5-engine/src/controller/editingcontroller';\nimport PluginCollection from '../plugincollection';\nimport CommandCollection from '../commandcollection';\nimport DataController from '@ckeditor/ckeditor5-engine/src/controller/datacontroller';\nimport Conversion from '@ckeditor/ckeditor5-engine/src/conversion/conversion';\nimport Model from '@ckeditor/ckeditor5-engine/src/model/model';\nimport EditingKeystrokeHandler from '../editingkeystrokehandler';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport { StylesProcessor } from '@ckeditor/ckeditor5-engine/src/view/stylesmap';\n\n/**\n * The class representing a basic, generic editor.\n *\n * Check out the list of its subclasses to learn about specific editor implementations.\n *\n * All editor implementations (like {@link module:editor-classic/classiceditor~ClassicEditor} or\n * {@link module:editor-inline/inlineeditor~InlineEditor}) should extend this class. They can add their\n * own methods and properties.\n *\n * When you are implementing a plugin, this editor represents the API\n * which your plugin can expect to get when using its {@link module:core/plugin~Plugin#editor} property.\n *\n * This API should be sufficient in order to implement the \"editing\" part of your feature\n * (schema definition, conversion, commands, keystrokes, etc.).\n * It does not define the editor UI, which is available only if\n * the specific editor implements also the {@link module:core/editor/editorwithui~EditorWithUI} interface\n * (as most editor implementations do).\n *\n * @abstract\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Editor {\n\t/**\n\t * Creates a new instance of the editor class.\n\t *\n\t * Usually, not to be used directly. See the static {@link module:core/editor/editor~Editor.create `create()`} method.\n\t *\n\t * @param {Object} [config={}] The editor configuration.\n\t */\n\tconstructor( config = {} ) {\n\t\t// Prefer the language passed as the argument to the constructor instead of the constructor's `defaultConfig`, if both are set.\n\t\tconst language = config.language || ( this.constructor.defaultConfig && this.constructor.defaultConfig.language );\n\n\t\t/**\n\t\t * The editor context.\n\t\t * When it is not provided through the configuration, the editor creates it.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:core/context~Context}\n\t\t */\n\t\tthis._context = config.context || new Context( { language } );\n\t\tthis._context._addEditor( this, !config.context );\n\n\t\t// Clone the plugins to make sure that the plugin array will not be shared\n\t\t// between editors and make the watchdog feature work correctly.\n\t\tconst availablePlugins = Array.from( this.constructor.builtinPlugins || [] );\n\n\t\t/**\n\t\t * Stores all configurations specific to this editor instance.\n\t\t *\n\t\t *\t\teditor.config.get( 'image.toolbar' );\n\t\t *\t\t// -> [ 'imageStyle:block', 'imageStyle:side', '|', 'toggleImageCaption', 'imageTextAlternative' ]\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/config~Config}\n\t\t */\n\t\tthis.config = new Config( config, this.constructor.defaultConfig );\n\t\tthis.config.define( 'plugins', availablePlugins );\n\t\tthis.config.define( this._context._getEditorConfig() );\n\n\t\t/**\n\t\t * The plugins loaded and in use by this editor instance.\n\t\t *\n\t\t *\t\teditor.plugins.get( 'ClipboardPipeline' ); // -> An instance of the clipboard pipeline plugin.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/plugincollection~PluginCollection}\n\t\t */\n\t\tthis.plugins = new PluginCollection( this, availablePlugins, this._context.plugins );\n\n\t\t/**\n\t\t * The locale instance.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = this._context.locale;\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method #t\n\t\t */\n\t\tthis.t = this.locale.t;\n\n\t\t/**\n\t\t * A set of lock IDs for the {@link #isReadOnly} getter.\n\t\t *\n\t\t * @private\n\t\t * @type {Set.<String|Symbol>}\n\t\t */\n\t\tthis._readOnlyLocks = new Set();\n\n\t\t/**\n\t\t * Commands registered to the editor.\n\t\t *\n\t\t * Use the shorthand {@link #execute `editor.execute()`} method to execute commands:\n\t\t *\n\t\t *\t\t// Execute the bold command:\n\t\t *\t\teditor.execute( 'bold' );\n\t\t *\n\t\t *\t\t// Check the state of the bold command:\n\t\t *\t\teditor.commands.get( 'bold' ).value;\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/commandcollection~CommandCollection}\n\t\t */\n\t\tthis.commands = new CommandCollection();\n\n\t\t/**\n\t\t * Indicates the editor life-cycle state.\n\t\t *\n\t\t * The editor is in one of the following states:\n\t\t *\n\t\t * * `initializing` &ndash; During the editor initialization (before\n\t\t * {@link module:core/editor/editor~Editor.create `Editor.create()`}) finished its job.\n\t\t * * `ready` &ndash; After the promise returned by the {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t * method is resolved.\n\t\t * * `destroyed` &ndash; Once the {@link #destroy `editor.destroy()`} method was called.\n\t\t *\n\t\t * @observable\n\t\t * @member {'initializing'|'ready'|'destroyed'} #state\n\t\t */\n\t\tthis.set( 'state', 'initializing' );\n\t\tthis.once( 'ready', () => ( this.state = 'ready' ), { priority: 'high' } );\n\t\tthis.once( 'destroy', () => ( this.state = 'destroyed' ), { priority: 'high' } );\n\n\t\t/**\n\t\t * The editor's model.\n\t\t *\n\t\t * The central point of the editor's abstract data model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = new Model();\n\n\t\tconst stylesProcessor = new StylesProcessor();\n\n\t\t/**\n\t\t * The {@link module:engine/controller/datacontroller~DataController data controller}.\n\t\t * Used e.g. for setting and retrieving the editor data.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/datacontroller~DataController}\n\t\t */\n\t\tthis.data = new DataController( this.model, stylesProcessor );\n\n\t\t/**\n\t\t * The {@link module:engine/controller/editingcontroller~EditingController editing controller}.\n\t\t * Controls user input and rendering the content for editing.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/editingcontroller~EditingController}\n\t\t */\n\t\tthis.editing = new EditingController( this.model, stylesProcessor );\n\t\tthis.editing.view.document.bind( 'isReadOnly' ).to( this );\n\n\t\t/**\n\t\t * Conversion manager through which you can register model-to-view and view-to-model converters.\n\t\t *\n\t\t * See the {@link module:engine/conversion/conversion~Conversion} documentation to learn how to add converters.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/conversion~Conversion}\n\t\t */\n\t\tthis.conversion = new Conversion( [ this.editing.downcastDispatcher, this.data.downcastDispatcher ], this.data.upcastDispatcher );\n\t\tthis.conversion.addAlias( 'dataDowncast', this.data.downcastDispatcher );\n\t\tthis.conversion.addAlias( 'editingDowncast', this.editing.downcastDispatcher );\n\n\t\t/**\n\t\t * An instance of the {@link module:core/editingkeystrokehandler~EditingKeystrokeHandler}.\n\t\t *\n\t\t * It allows setting simple keystrokes:\n\t\t *\n\t\t *\t\t// Execute the bold command on Ctrl+E:\n\t\t *\t\teditor.keystrokes.set( 'Ctrl+E', 'bold' );\n\t\t *\n\t\t *\t\t// Execute your own callback:\n\t\t *\t\teditor.keystrokes.set( 'Ctrl+E', ( data, cancel ) => {\n\t\t *\t\t\tconsole.log( data.keyCode );\n\t\t *\n\t\t *\t\t\t// Prevent the default (native) action and stop the underlying keydown event\n\t\t *\t\t\t// so no other editor feature will interfere.\n\t\t *\t\t\tcancel();\n\t\t *\t\t} );\n\t\t *\n\t\t * Note: Certain typing-oriented keystrokes (like <kbd>Backspace</kbd> or <kbd>Enter</kbd>) are handled\n\t\t * by a low-level mechanism and trying to listen to them via the keystroke handler will not work reliably.\n\t\t * To handle these specific keystrokes, see the events fired by the\n\t\t * {@link module:engine/view/document~Document editing view document} (`editor.editing.view.document`).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editingkeystrokehandler~EditingKeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new EditingKeystrokeHandler( this );\n\t\tthis.keystrokes.listenTo( this.editing.view.document );\n\t}\n\n\t/**\n\t * Defines whether the editor is in the read-only mode.\n\t *\n\t * In read-only mode the editor {@link #commands commands} are disabled so it is not possible\n\t * to modify the document by using them. Also, the editable element(s) become non-editable.\n\t *\n\t * In order to make the editor read-only, you need to call the {@link #enableReadOnlyMode} method:\n\t *\n\t *\t\teditor.enableReadOnlyMode( 'feature-id' );\n\t *\n     * Later, to turn off the read-only mode, call {@link #disableReadOnlyMode}:\n\t *\n\t * \t\teditor.disableReadOnlyMode( 'feature-id' );\n\t *\n\t * @readonly\n\t * @observable\n\t * @member {Boolean} #isReadOnly\n\t */\n\tget isReadOnly() {\n\t\treturn this._readOnlyLocks.size > 0;\n\t}\n\n\tset isReadOnly( value ) {\n\t\t/**\n\t\t * {@link #isReadOnly Editor#isReadOnly} property is read-only since version `34.0.0` and can be set only using\n\t\t * {@link #enableReadOnlyMode `Editor#enableReadOnlyMode( lockId )`} and\n\t\t * {@link #disableReadOnlyMode `Editor#disableReadOnlyMode( lockId )`}.\n\t\t *\n\t\t * Before version `34.0.0`:\n\t\t *\n\t\t *\t\teditor.isReadOnly = true;\n\t\t * \t\teditor.isReadOnly = false;\n\t\t *\n\t\t * Since version `34.0.0`:\n\t\t *\n\t\t *\t\teditor.enableReadOnlyMode( 'my-feature-id' );\n\t\t * \t\teditor.disableReadOnlyMode( 'my-feature-id' );\n\t\t *\n\t\t * @error editor-isreadonly-has-no-setter\n\t\t */\n\t\tthrow new CKEditorError( 'editor-isreadonly-has-no-setter' );\n\t}\n\n\t/**\n\t * Turns on the read-only mode in the editor.\n\t *\n\t * Editor can be switched to or out of the read-only mode by many features, under various circumstances. The editor supports locking\n\t * mechanism for the read-only mode. It enables easy control over the read-only mode when many features wants to turn it on or off at\n\t * the same time, without conflicting with each other. It guarantees that you will not make the editor editable accidentally (which\n\t * could lead to errors).\n\t *\n\t * Each read-only mode request is identified by a unique id (also called \"lock\"). If multiple plugins requested to turn on the\n\t * read-only mode, then, the editor will become editable only after all these plugins turn the read-only mode off (using the same ids).\n\t *\n\t * Note, that you cannot force the editor to disable the read-only mode if other plugins set it.\n\t *\n\t * After the first `enableReadOnlyMode()` call, the {@link #isReadOnly `isReadOnly` property} will be set to `true`:\n\t *\n\t *\t\teditor.isReadOnly; // `false`.\n\t * \t\teditor.enableReadOnlyMode( 'my-feature-id' );\n\t * \t\teditor.isReadOnly; // `true`.\n\t *\n\t * You can turn off the read-only mode (\"clear the lock\") using the {@link #disableReadOnlyMode `disableReadOnlyMode()`} method:\n\t *\n\t * \t\teditor.enableReadOnlyMode( 'my-feature-id' );\n\t * \t\t// ...\n\t * \t\teditor.disableReadOnlyMode( 'my-feature-id' );\n\t * \t\teditor.isReadOnly; // `false`.\n\t *\n\t * All \"locks\" need to be removed to enable editing:\n\t *\n\t * \t\teditor.enableReadOnlyMode( 'my-feature-id' );\n\t * \t\teditor.enableReadOnlyMode( 'my-other-feature-id' );\n\t * \t\t// ...\n\t * \t\teditor.disableReadOnlyMode( 'my-feature-id' );\n\t * \t\teditor.isReadOnly; // `true`.\n\t * \t\teditor.disableReadOnlyMode( 'my-other-feature-id' );\n\t * \t\teditor.isReadOnly; // `false`.\n\t *\n\t * @param {String|Symbol} lockId A unique ID for setting the editor to the read-only state.\n\t */\n\tenableReadOnlyMode( lockId ) {\n\t\tif ( typeof lockId !== 'string' && typeof lockId !== 'symbol' ) {\n\t\t\t/**\n\t\t\t * The lock ID is missing or it is not a string or symbol.\n\t\t\t *\n\t\t\t * @error editor-read-only-lock-id-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'editor-read-only-lock-id-invalid', null, { lockId } );\n\t\t}\n\n\t\tif ( this._readOnlyLocks.has( lockId ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._readOnlyLocks.add( lockId );\n\n\t\tif ( this._readOnlyLocks.size === 1 ) {\n\t\t\t// Manually fire the `change:isReadOnly` event as only getter is provided.\n\t\t\tthis.fire( 'change:isReadOnly', 'isReadOnly', true, false );\n\t\t}\n\t}\n\n\t/**\n\t * Removes the read-only lock from the editor with given lock ID.\n\t *\n\t * When no lock is present on the editor anymore, then the {@link #isReadOnly `isReadOnly` property} will be set to `false`.\n\t *\n\t * @param {String|Symbol} lockId The lock ID for setting the editor to the read-only state.\n\t */\n\tdisableReadOnlyMode( lockId ) {\n\t\tif ( typeof lockId !== 'string' && typeof lockId !== 'symbol' ) {\n\t\t\tthrow new CKEditorError( 'editor-read-only-lock-id-invalid', null, { lockId } );\n\t\t}\n\n\t\tif ( !this._readOnlyLocks.has( lockId ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._readOnlyLocks.delete( lockId );\n\n\t\tif ( this._readOnlyLocks.size === 0 ) {\n\t\t\t// Manually fire the `change:isReadOnly` event as only getter is provided.\n\t\t\tthis.fire( 'change:isReadOnly', 'isReadOnly', false, true );\n\t\t}\n\t}\n\n\t/**\n\t * Loads and initializes plugins specified in the configuration.\n\t *\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which resolves\n\t * once the initialization is completed, providing an array of loaded plugins.\n\t */\n\tinitPlugins() {\n\t\tconst config = this.config;\n\t\tconst plugins = config.get( 'plugins' );\n\t\tconst removePlugins = config.get( 'removePlugins' ) || [];\n\t\tconst extraPlugins = config.get( 'extraPlugins' ) || [];\n\t\tconst substitutePlugins = config.get( 'substitutePlugins' ) || [];\n\n\t\treturn this.plugins.init( plugins.concat( extraPlugins ), removePlugins, substitutePlugins );\n\t}\n\n\t/**\n\t * Destroys the editor instance, releasing all resources used by it.\n\t *\n\t * **Note** The editor cannot be destroyed during the initialization phase so if it is called\n\t * while the editor {@link #state is being initialized}, it will wait for the editor initialization before destroying it.\n\t *\n\t * @fires destroy\n\t * @returns {Promise} A promise that resolves once the editor instance is fully destroyed.\n\t */\n\tdestroy() {\n\t\tlet readyPromise = Promise.resolve();\n\n\t\tif ( this.state == 'initializing' ) {\n\t\t\treadyPromise = new Promise( resolve => this.once( 'ready', resolve ) );\n\t\t}\n\n\t\treturn readyPromise\n\t\t\t.then( () => {\n\t\t\t\tthis.fire( 'destroy' );\n\t\t\t\tthis.stopListening();\n\t\t\t\tthis.commands.destroy();\n\t\t\t} )\n\t\t\t.then( () => this.plugins.destroy() )\n\t\t\t.then( () => {\n\t\t\t\tthis.model.destroy();\n\t\t\t\tthis.data.destroy();\n\t\t\t\tthis.editing.destroy();\n\t\t\t\tthis.keystrokes.destroy();\n\t\t\t} )\n\t\t\t// Remove the editor from the context.\n\t\t\t// When the context was created by this editor, the context will be destroyed.\n\t\t\t.then( () => this._context._removeEditor( this ) );\n\t}\n\n\t/**\n\t * Executes the specified command with given parameters.\n\t *\n\t * Shorthand for:\n\t *\n\t *\t\teditor.commands.get( commandName ).execute( ... );\n\t *\n\t * @param {String} commandName The name of the command to execute.\n\t * @param {*} [...commandParams] Command parameters.\n\t * @returns {*} The value returned by the {@link module:core/commandcollection~CommandCollection#execute `commands.execute()`}.\n\t */\n\texecute( ...args ) {\n\t\ttry {\n\t\t\treturn this.commands.execute( ...args );\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the editor.\n\t *\n\t * **Note** To explicitly focus the editing area of the editor, use the\n\t * {@link module:engine/view/view~View#focus `editor.editing.view.focus()`} method of the editing view.\n\t *\n\t * Check out the {@glink framework/guides/deep-dive/ui/focus-tracking#focus-in-the-editor-ui Focus in the editor UI} section\n\t * of the {@glink framework/guides/deep-dive/ui/focus-tracking Deep dive into focus tracking} guide to learn more.\n\t */\n\tfocus() {\n\t\tthis.editing.view.focus();\n\t}\n\n\t/**\n\t * Creates and initializes a new editor instance.\n\t *\n\t * This is an abstract method. Every editor type needs to implement its own initialization logic.\n\t *\n\t * See the `create()` methods of the existing editor types to learn how to use them:\n\t *\n\t * * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}\n\t * * {@link module:editor-balloon/ballooneditor~BalloonEditor.create `BalloonEditor.create()`}\n\t * * {@link module:editor-decoupled/decouplededitor~DecoupledEditor.create `DecoupledEditor.create()`}\n\t * * {@link module:editor-inline/inlineeditor~InlineEditor.create `InlineEditor.create()`}\n\t *\n\t * @abstract\n\t * @method module:core/editor/editor~Editor.create\n\t */\n}\n\nmix( Editor, ObservableMixin );\n\n/**\n * Fired when the {@link module:engine/controller/datacontroller~DataController#event:ready data} and all additional\n * editor components are ready.\n *\n * Note: This event is most useful for plugin developers. When integrating the editor with your website or\n * application, you do not have to listen to `editor#ready` because when the promise returned by the static\n * {@link module:core/editor/editor~Editor.create `Editor.create()`} event is resolved, the editor is already ready.\n * In fact, since the first moment when the editor instance is available to you is inside `then()`'s callback,\n * you cannot even add a listener to the `editor#ready` event.\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event ready\n */\n\n/**\n * Fired when this editor instance is destroyed. The editor at this point is not usable and this event should be used to\n * perform the clean-up in any plugin.\n *\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event destroy\n */\n\n/**\n * This error is thrown when trying to pass a `<textarea>` element to a `create()` function of an editor class.\n *\n * The only editor type which can be initialized on `<textarea>` elements is\n * the {@glink installation/advanced/alternative-setups/predefined-builds#classic-editor classic editor}.\n * This editor hides the passed element and inserts its own UI next to it. Other types of editors reuse the passed element as their root\n * editable element and therefore `<textarea>` is not appropriate for them. Use a `<div>` or another text container instead:\n *\n *\t\t<div id=\"editor\">\n *\t\t\t<p>Initial content.</p>\n *\t\t</div>\n *\n * @error editor-wrong-element\n */\n\n/**\n * An array of plugins built into this editor class.\n *\n * It is used in CKEditor 5 builds to provide a list of plugins which are later automatically initialized\n * during the editor initialization.\n *\n * They will be automatically initialized by the editor, unless listed in `config.removePlugins` and\n * unless `config.plugins` is passed.\n *\n *\t\t// Build some plugins into the editor class first.\n *\t\tClassicEditor.builtinPlugins = [ FooPlugin, BarPlugin ];\n *\n *\t\t// Normally, you need to define config.plugins, but since ClassicEditor.builtinPlugins was\n *\t\t// defined, now you can call create() without any configuration.\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\teditor.plugins.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Do not initialize these plugins (note: it is defined by a string):\n *\t\t\t\tremovePlugins: [ 'Foo' ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> Undefined.\n *\t\t\t\teditor.config.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Load only this plugin. It can also be defined by a string if\n *\t\t\t\t// this plugin was built into the editor class.\n *\t\t\t\tplugins: [ FooPlugin ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\teditor.config.get( BarPlugin ); // -> Undefined.\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.defaultConfig}.\n *\n * @static\n * @member {Array.<Function>} module:core/editor/editor~Editor.builtinPlugins\n */\n\n/**\n * The default configuration which is built into the editor class.\n *\n * It is used in CKEditor 5 builds to provide the default configuration options which are later used during the editor initialization.\n *\n *\t\tClassicEditor.defaultConfig = {\n *\t\t\tfoo: 1,\n *\t\t\tbar: 2\n *\t\t};\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 2\n *\t\t\t} );\n *\n *\t\t// The default options can be overridden by the configuration passed to create().\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, { bar: 3 } )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 3\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.builtinPlugins}.\n *\n * @static\n * @member {Object} module:core/editor/editor~Editor.defaultConfig\n */\n"],"mappings":"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b,CAAkBC,QAAlB,CAA2BC,IAA3B,CAAiC,YAAjC,EAAgDC,EAAhD,CAAoD,IAApD;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;IACE,KAAKC,UAAL,GAAkB,IAAIvC,UAAJ,CAAgB,CAAE,KAAKkC,OAAL,CAAaM,kBAAf,EAAmC,KAAKP,IAAL,CAAUO,kBAA7C,CAAhB,EAAmF,KAAKP,IAAL,CAAUQ,gBAA7F,CAAlB;IACA,KAAKF,UAAL,CAAgBG,QAAhB,CAA0B,cAA1B,EAA0C,KAAKT,IAAL,CAAUO,kBAApD;IACA,KAAKD,UAAL,CAAgBG,QAAhB,CAA0B,iBAA1B,EAA6C,KAAKR,OAAL,CAAaM,kBAA1D;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACE,KAAKG,UAAL,GAAkB,IAAIzC,uBAAJ,CAA6B,IAA7B,CAAlB;IACA,KAAKyC,UAAL,CAAgBC,QAAhB,CAA0B,KAAKV,OAAL,CAAaC,IAAb,CAAkBC,QAA5C;EACA;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACe,IAAVS,UAAU,GAAG;IAChB,OAAO,KAAKrB,cAAL,CAAoBsB,IAApB,GAA2B,CAAlC;EACA;;EAEa,IAAVD,UAAU,CAAEE,KAAF,EAAU;IACvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,MAAM,IAAI1C,aAAJ,CAAmB,iCAAnB,CAAN;EACA;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACC2C,kBAAkB,CAAEC,MAAF,EAAW;IA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A;AACA;AACA;;;AApZ4B;AAuZ5BpE,GAAG,CAAEG,MAAF,EAAUJ,eAAV,CAAH;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}